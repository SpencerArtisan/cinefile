// Generated by CoffeeScript 1.3.3
(function() {
  'use strict';

  angular.module("app").controller("FilmsController", [
    "$scope", "$resource", "$location", function(scope, resource, location) {
      scope.loadFilms = function() {
        var failure, success;
        scope.films = [];
        success = function(response) {
          console.log("films succeeded with " + response.films);
          return scope.films = response.films;
        };
        failure = function(response) {
          return console.log("films failed with " + response.status);
        };
        return resource('/films').get(success, failure);
      };
      scope.when_formatted = function(showing) {
        return moment(showing.day_on).format('ddd Do MMM');
      };
      scope.showFilm = function(id) {
        return location.path("/films/" + id);
      };
      return scope.link = function(film) {
        return encodeURIComponent(film.link);
      };
    }
  ]);

}).call(this);
