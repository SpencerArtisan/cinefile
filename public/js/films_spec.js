// Generated by CoffeeScript 1.3.3
(function() {

  describe("FilmsController", function() {
    var httpBackend, location, resource, scope, subject;
    subject = void 0;
    scope = void 0;
    location = void 0;
    resource = void 0;
    httpBackend = void 0;
    beforeEach(module("app"));
    beforeEach(inject(function($rootScope, $location, $resource, $controller) {
      scope = $rootScope.$new();
      location = $location;
      resource = $resource;
      return subject = $controller("FilmsController", {
        $scope: scope
      });
    }));
    beforeEach(function() {
      return angular.mock.inject(function($injector) {
        return httpBackend = $injector.get("$httpBackend");
      });
    });
    return describe("Loading the films", function() {
      return describe("which succeeds when retrieving from the server", function() {
        beforeEach(function() {
          httpBackend.expectGET("/films").respond(201, {
            films: [
              {
                id: 1,
                title: 'a film'
              }, {
                id: 2,
                title: 'another film'
              }
            ]
          });
          scope.loadFilms();
          httpBackend.flush();
          return this.film = scope.films[0];
        });
        return it("should provide all the films", function() {
          return expect(scope.films.length).toEqual(2);
        });
      });
    });
  });

}).call(this);
